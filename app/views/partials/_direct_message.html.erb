<% unless current_user&.username == direct_message.channel_name%>
  <div class="row filterDiscussions all read single">
    <div class="col-2">
      <i class="material-icons">person</i>
    </div>
    <div class="col-8">
      <% if current_user.present? %>
        <% channel_name = (direct_message.channel_name.strip.split(",")).select {|a| a!=current_user.username}.join %>
      <% else %>
      <% channel_name = (direct_message.channel_name.strip.split(",")).select {|a| a == user.username}.join %>
      <% end %>
      <%= link_to channel_name, direct_message %>
    </div>
    <%= turbo_stream_from "private_msg_count_#{direct_message.id}_#{@current_user&.id}" %>
    <% msg_count = direct_message.messages.where("created_at > ? AND user_id != ?", (direct_message.last_read["#{@current_user&.id}"])&.to_time, @current_user&.id).count %>
    <% unless msg_count.zero? %>
      <div class="col-1 new bg-yellow" id="show_private_message_count_<%= direct_message.id %>_<%= @current_user&.id%>">
        <%= render 'partials/private_message_count', msg_count: msg_count%>
      </div>
    <% end %>
  </div>
<% end %>


